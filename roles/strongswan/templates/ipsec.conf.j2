# ipsec.conf - strongSwan IPsec configuration file

# basic configuration

config setup
    # strictcrlpolicy=yes
    # uniqueids = no


# Add connections here.

{% for host in play_hosts %}
{% if inventory_hostname != hostvars[host]['inventory_hostname'] %}

conn host-host-{{ hostvars[host]['inventory_hostname'] }}
    leftcert={{ inventory_hostname }}-hostCert.pem
    right={{ hostvars[host]['physical_ip'] }}
    rightid="C={{ swan_c }}, O={{ swan_o }}, CN={{ hostvars[host]['inventory_hostname'] }}"
    auto=start
    # you may specify Cipher, Pseudo-random, Diffie Hellman Groups
    # esp=aes128cbc-prfsha256-ecp256
    # ike=aes128cbc-prfsha256-ecp256


{% endif %}
{% endfor %}


# Sample VPN connections

#conn sample-self-signed
#      leftsubnet=10.1.0.0/16
#      leftcert=selfCert.der
#      leftsendcert=never
#      right=192.168.0.2
#      rightsubnet=10.2.0.0/16
#      rightcert=peerCert.der
#      auto=start

#conn sample-with-ca-cert
#      leftsubnet=10.1.0.0/16
#      leftcert=myCert.pem
#      right=192.168.0.2
#      rightsubnet=10.2.0.0/16
#      rightid="C=CH, O=Linux strongSwan CN=peer name"
#      auto=start

